#N canvas 713 0 1440 809 12;
#X obj 38 32 loadbang;
#X obj 497 840 s bela_digitalOut18;
#X obj 649 839 s bela_digitalOut19;
#X obj 793 842 s bela_digitalOut20;
#X obj 35 841 s bela_digitalOut15;
#X obj 190 842 s bela_digitalOut16;
#X obj 346 841 s bela_digitalOut17;
#X obj 29 744 switches, f 110;
#X obj 601 23 adc~ 3 4 5 6 7 8 9, f 34;
#X obj 600 123 dials, f 38;
#X obj 71 89 adc~ 1 2;
#X obj 111 701 dac~ 1 2;
#N canvas 819 130 450 300 ezdist 0;
#X obj 57 37 inlet~;
#X obj 59 196 outlet~;
#X obj 140 37 inlet;
#X obj 59 105 *~ 1;
#X obj 59 150 clip~ -0.2 0.2;
#X connect 0 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X restore 163 140 pd ezdist;
#X floatatom 328 78 5 0.6 5 1 dist\ amount - - 0;
#N canvas 819 130 450 300 ezdist 0;
#X obj 57 37 inlet~;
#X obj 59 196 outlet~;
#X obj 140 37 inlet;
#X obj 59 105 *~ 1;
#X obj 59 150 clip~ -0.2 0.2;
#X connect 0 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X restore 69 148 pd ezdist;
#X obj 221 613 catch~ out1;
#X obj 314 614 catch~ out2;
#X obj 281 477 effects;
#X msg 327 49 1;
#X obj 11 570 throw~ delay;
#X obj 222 575 throw~ delay2;
#X obj 222 669 *~;
#X obj 314 680 *~;
#N canvas 156 156 450 300 mixer 0;
#X obj 34 28 inlet~;
#X obj 125 30 inlet~;
#X obj 36 125 *~;
#X obj 120 122 *~;
#X obj 38 215 outlet~;
#X obj 117 219 outlet~;
#X obj 161 65 r volume_dial;
#X text 154 118 basic mixing patch to map the volume dial;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 6 0 2 1;
#X connect 6 0 3 1;
#X restore 114 534 pd mixer;
#X obj 371 641 r del_amt;
#X obj 419 175 *~ 2;
#X obj 419 236 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 333 392 next \$1;
#X obj 334 420 clone clone_synth 32;
#X floatatom 334 332 5 0 0 0 - - - 0;
#X obj 295 366 * 2;
#N canvas 130 130 450 425 debounce 0;
#X obj 32 18 inlet;
#X obj 31 386 outlet;
#X obj 36 109 i;
#X msg 88 118 0;
#X floatatom 36 188 5 0 0 0 - - - 0;
#X obj 32 277 sel 3;
#X obj 36 144 + 1;
#X obj 77 84 del 30;
#X text 127 119 resets to 0 every 30ms;
#X text 97 37 debouncing patch to stop multiple triggers - failsafe;
#X connect 0 0 2 0;
#X connect 0 0 7 0;
#X connect 2 0 6 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 1 0;
#X connect 6 0 4 0;
#X connect 6 0 2 1;
#X connect 7 0 3 0;
#X restore 420 259 pd debounce;
#X obj 420 208 threshold~ 0.05 10 0.05 10;
#N canvas -7 0 718 800 env_follow 0;
#X obj 41 232 env~;
#X obj 88 233 env~;
#X obj 48 260 +;
#X obj 46 469 s amp_env;
#X obj 122 293 sig~;
#X obj 157 333 snapshot~;
#X obj 163 228 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 93 23 inlet~;
#X obj 30 24 inlet~;
#X obj 207 19 inlet;
#X obj 18 129 hip~ 8000;
#X obj 104 128 hip~ 8000;
#X obj 158 270 metro 200;
#X obj 172 401 / 100;
#X obj 171 444 print AMP_ENV;
#X text 190 365 print for debugging;
#X text 108 164 within this patch we determine the RMS values of both audio inputs and sum them to map the amplitude to the digital synth;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 2 0 3 0;
#X connect 4 0 5 0;
#X connect 5 0 13 0;
#X connect 6 0 12 0;
#X connect 7 0 11 0;
#X connect 8 0 10 0;
#X connect 9 0 6 0;
#X connect 10 0 0 0;
#X connect 11 0 1 0;
#X connect 12 0 5 0;
#X restore 88 251 pd env_follow;
#X text 540 23 3-DECAY 4-MOD 1 5-MOD 2 6-RAND 7-FX MOD 8-FX AMT 9-VOLUME;
#N canvas 671 80 672 592 pitch 0;
#X obj 273 26 r pitch_var;
#X obj 34 215 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 65 215 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 100 214 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 136 215 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 171 215 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 204 215 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 240 216 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 274 215 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 313 211 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 347 215 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 379 215 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 416 214 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 449 213 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 485 216 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 522 217 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 33 261 36;
#X msg 67 260 38;
#X msg 103 260 39;
#X msg 136 258 41;
#X msg 170 260 43;
#X msg 206 259 45;
#X msg 241 258 46;
#X msg 276 257 48;
#X msg 312 258 50;
#X msg 349 258 51;
#X msg 384 256 53;
#X msg 418 257 55;
#X msg 453 256 57;
#X msg 486 254 58;
#X msg 520 254 60;
#X obj 283 436 outlet;
#X obj 35 176 sel 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14, f 75;
#X obj 37 130 random 2;
#X obj 273 61 * 15;
#X obj 46 40 inlet;
#X obj 287 101 int;
#X text 356 22 selects through scale pitches variation amount depends on the rand dial on the instrument;
#X text 175 129 0 on the rand dial will keep it at one note whereas full dial will randomly trigger all 15;
#X text 316 99 int turns the float value to a whole number;
#X connect 0 0 34 0;
#X connect 1 0 16 0;
#X connect 2 0 17 0;
#X connect 3 0 18 0;
#X connect 4 0 19 0;
#X connect 5 0 20 0;
#X connect 6 0 21 0;
#X connect 7 0 22 0;
#X connect 8 0 23 0;
#X connect 9 0 24 0;
#X connect 10 0 25 0;
#X connect 11 0 26 0;
#X connect 12 0 27 0;
#X connect 13 0 28 0;
#X connect 14 0 29 0;
#X connect 15 0 30 0;
#X connect 16 0 31 0;
#X connect 17 0 31 0;
#X connect 18 0 31 0;
#X connect 19 0 31 0;
#X connect 20 0 31 0;
#X connect 21 0 31 0;
#X connect 22 0 31 0;
#X connect 23 0 31 0;
#X connect 24 0 31 0;
#X connect 25 0 31 0;
#X connect 26 0 31 0;
#X connect 27 0 31 0;
#X connect 28 0 31 0;
#X connect 29 0 31 0;
#X connect 30 0 31 0;
#X connect 32 0 1 0;
#X connect 32 1 2 0;
#X connect 32 2 3 0;
#X connect 32 3 4 0;
#X connect 32 4 5 0;
#X connect 32 5 6 0;
#X connect 32 6 7 0;
#X connect 32 7 8 0;
#X connect 32 8 9 0;
#X connect 32 9 10 0;
#X connect 32 10 11 0;
#X connect 32 11 12 0;
#X connect 32 12 13 0;
#X connect 32 13 14 0;
#X connect 32 14 15 0;
#X connect 33 0 32 0;
#X connect 34 0 36 0;
#X connect 35 0 33 0;
#X connect 36 0 33 1;
#X restore 335 296 pd pitch;
#X obj 75 368 *~ 1.5;
#X obj 163 366 *~ 1.5;
#X text 869 41 analog inputs for the potentiometers analog input 0 - 6 on Bela line up with adc~ inputs 3 - 9;
#X text 616 203 thresholding for triggering the digital synthesis engine;
#X text 503 259 patch for debouncing the threshold;
#X text 401 298 patch for pitches when on switch setting 1;
#X text 446 359 moves the pitches up an octave;
#X text 488 390 the 'next' message sends the midi values to the clone object which changes clone instance whenever the next value is triggered. (this create the ability for multiple voices at once);
#X text 341 468 patch that contains the delay unit and the wavefolding distortion;
#X text 72 70 contact microphone inputs;
#X text 238 144 clipping the contact mic inputs;
#X text 182 535 patch to change the volume of all elements;
#X text 444 631 when the delay switch is on you can control the volume of the delay;
#X text 179 702 stereo audio output;
#X text 381 709 the switches patch contains the logic for the key switches on the instrument;
#X text 196 808 the digital outs control the LED's on the instrument;
#X connect 0 0 18 0;
#X connect 0 0 9 0;
#X connect 0 0 7 0;
#X connect 0 0 33 2;
#X connect 7 0 4 0;
#X connect 7 1 5 0;
#X connect 7 2 6 0;
#X connect 7 3 1 0;
#X connect 7 4 2 0;
#X connect 7 5 3 0;
#X connect 8 0 9 1;
#X connect 8 1 9 2;
#X connect 8 2 9 3;
#X connect 8 3 9 4;
#X connect 8 4 9 5;
#X connect 8 5 9 6;
#X connect 8 6 9 7;
#X connect 9 0 17 0;
#X connect 10 0 14 0;
#X connect 10 1 12 0;
#X connect 12 0 25 0;
#X connect 12 0 33 1;
#X connect 12 0 37 0;
#X connect 13 0 12 1;
#X connect 13 0 14 1;
#X connect 14 0 25 0;
#X connect 14 0 33 0;
#X connect 14 0 36 0;
#X connect 15 0 21 0;
#X connect 16 0 22 0;
#X connect 17 0 23 0;
#X connect 17 0 23 1;
#X connect 18 0 13 0;
#X connect 21 0 11 0;
#X connect 22 0 11 1;
#X connect 23 0 19 0;
#X connect 23 0 11 0;
#X connect 23 1 20 0;
#X connect 23 1 11 1;
#X connect 24 0 21 1;
#X connect 24 0 22 1;
#X connect 25 0 32 0;
#X connect 26 0 31 0;
#X connect 27 0 28 0;
#X connect 28 0 23 0;
#X connect 28 0 23 1;
#X connect 28 0 17 1;
#X connect 29 0 30 0;
#X connect 30 0 27 0;
#X connect 31 0 35 0;
#X connect 32 0 26 0;
#X connect 35 0 29 0;
#X connect 36 0 23 0;
#X connect 37 0 23 1;
